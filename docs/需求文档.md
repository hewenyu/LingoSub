# 字幕翻译工具需求文档

## 一、项目简介

本项目旨在开发一套基于大语言模型的字幕翻译工具，包括服务端API与桌面客户端。整体流程为：客户端对本地视频进行语音识别生成初版SRT字幕，然后上传至服务端，由服务端翻译并美化处理后返回符合Netflix标准的新SRT字幕文件。

---

## 二、功能需求

### 1. 客户端

#### 1.1 基础功能

- 支持导入本地视频文件（常见格式如MP4、MKV等）
- 使用 Faster Whisper 模型进行本地语音识别，自动生成初版SRT字幕文件
- 简单字幕编辑与预览（可选，后续可扩展）
- 将生成的SRT文件上传至服务端API，选择目标翻译语言
- 显示服务端处理进度，下载并保存最终SRT字幕文件

#### 1.2 技术要求

- 跨平台桌面应用（建议PyQt、Electron、Tauri等技术栈，优先PyQt结合Python生态）
- 集成 Faster Whisper 语音识别模型
- 提供简洁美观的GUI界面
- 支持配置服务端API地址及API Key

---

### 2. 服务端API

- 支持多种大语言模型：gpt-4.1-mini、gpt-4.1-nano、gpt-4o-mini，允许用户自定义代理站点
- 输入：SRT字幕文件及目标语言
- 输出：符合Netflix字幕标准的翻译SRT文件
- 标准要求包括：
    - 行长度与时长限制
    - 单屏最多两行
    - 断句与换行规则
    - 时间轴格式化
    - 标点符号、特殊符号处理
- 提供RESTful API：上传、任务进度查询、下载结果等
- 支持API Key认证
- 提供Python和Cloudflare Workers两种实现版本

---

## 三、非功能需求

- 易用性：客户端界面友好，API文档清晰
- 可扩展性：支持后续添加新模型、字幕格式、更多语言
- 性能：客户端本地识别流畅，服务端并发处理能力强
- 安全性：API需有基础认证措施，防止滥用
- 合规性：输出字幕严格对齐Netflix字幕标准

---

## 四、交付内容

1. 需求文档（本文件）
2. Python服务端API实现及部署说明
3. Cloudflare Workers服务端API实现及部署说明
4. 客户端桌面程序（含源码与打包说明）
5. API接口文档
6. Netflix字幕标准规范说明
7. 测试用例及示例字幕文件

---

## 五、后续可扩展方向

- 客户端支持更多本地语音识别模型
- 客户端支持多语言UI
- 服务端支持更多大模型
- 增加Web前端
- 支持自动分段、润色、错别字纠正等AI字幕优化功能

---